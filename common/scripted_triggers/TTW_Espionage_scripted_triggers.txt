#################################################
##=|   Espionage Mechanic Scripted Triggers  |=##
##======================| |====================##
#################################################

#Index; Search for these names using ctrl+f and you'll find the section they entitle.
#	General
#		TTW_Espionage_AllowedTags
#		TTW_Espionage_ActiveTags
#		TTW_Espionage_AgentsAvailable
#		TTW_Espionage_ResearchCosts
#
#	Regions
#		TTW_Espionage_Viewwing_NorthAmerica
#		TTW_Espionage_Viewwing_CentralAmerica
#		TTW_Espionage_Viewwing_SouthAmerica
#		TTW_Espionage_Viewwing_Europe
#		TTW_Espionage_Viewwing_Russia
#		TTW_Espionage_Viewwing_Africa
#		TTW_Espionage_Viewwing_MiddleEast
#		TTW_Espionage_Viewwing_EastAsia
#		TTW_Espionage_Viewwing_SouthEastAsia
#		TTW_Espionage_Viewwing_Oceania
#
#	Technology
#		TTW_Espionage_FmElo_Researched
#		TTW_Espionage_Sonder_Researched
#		TTW_Espionage_Ent_Researched
#		TTW_Espionage_Bugs_Researched
#		TTW_Espionage_Cipher_Researched
#		TTW_Espionage_Nah_Researched
#		TTW_Espionage_Radio_Researched
#		TTW_Espionage_Camera_Researched
#		TTW_Espionage_Fleck_Researched
#		TTW_Espionage_Truth_Researched

# ALWAYS make sure that these are contained inside a OR check with 'is_ai = yes'!!
TTW_BoP_Viewing_Espionage		 = { check_variable = { TTW_BoP_SelectedTab = token:BoP_Tab_Espionage } }
TTW_BoP_Viewing_GlobalConflicts	 = { check_variable = { TTW_BoP_SelectedTab = token:BoP_Tab_GlobalConflicts } }
TTW_BoP_Viewing_SACW			 = { check_variable = { TTW_BoP_SelectedTab = token:BoP_Tab_SACW } }
#################################################
#                    General                    #
#################################################

TTW_Espionage_AllowedTags = {
	OR = {
		original_tag = GER
		original_tag = USA
	}
}

TTW_Espionage_ActiveTags = {
	TTW_Espionage_AllowedTags = yes
	has_country_flag = TTW_Espionage_Mech_Active
}

TTW_Espionage_AgentsAvailable = {
	custom_trigger_tooltip = {
		tooltip = TTW_Espionage_AgentsAvailable_tt
		check_variable = { TTW_Espionage_Agents > 0 }
	}
}

TTW_Espionage_NoSpecialMission = {
	custom_trigger_tooltip = {
		tooltip = TTW_Espionage_NoSpecialMission_tt
		NOT = { has_country_flag = TTW_Espionage_DoingSpecialMission }
	}
}

TTW_Espionage_ResearchCosts = {
	if = { # German Techs
		limit = { tag = GER }
		if = { # Modernized Fm/EloAufkl
			limit = { check_variable = { Tech_i = 0 } }
			set_temp_variable = { N = 100 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Sonderblindfunkdienst
			limit = { check_variable = { Tech_i = 1 } }
			set_temp_variable = { N = 75 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # ENTDECKER Recon Satellites
			limit = { check_variable = { Tech_i = 2 } }
			set_temp_variable = { N = 150 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # 31211-5 Bugs
			limit = { check_variable = { Tech_i = 3 } }
			set_temp_variable = { N = 25 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # M-190 Cipher Machine
			limit = { check_variable = { Tech_i = 4 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Nahkampf Training
			limit = { check_variable = { Tech_i = 5 } }
			set_temp_variable = { N = 30 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # UFT-421 Personal Radio
			limit = { check_variable = { Tech_i = 6 } }
			set_temp_variable = { N = 60 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # RS 50 Modified Camera
			limit = { check_variable = { Tech_i = 7 } }
			set_temp_variable = { N = 20 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Flecktarn B Camouflage
			limit = { check_variable = { Tech_i = 8 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # "Truth Serum"
			limit = { check_variable = { Tech_i = 9 } }
			set_temp_variable = { N = 30 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
	}

	else_if = { # American Techs
		limit = { tag = USA }
		if = { # Pigeon Camera
			limit = { check_variable = { Tech_i = 0 } }
			set_temp_variable = { N = 100 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Belly Buster
			limit = { check_variable = { Tech_i = 1 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Engraved Mirrors
			limit = { check_variable = { Tech_i = 2 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Cigarette Camera
			limit = { check_variable = { Tech_i = 3 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Miniature Compass
			limit = { check_variable = { Tech_i = 4 } }
			set_temp_variable = { N = 150 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Pipe Radio
			limit = { check_variable = { Tech_i = 5 } }
			set_temp_variable = { N = 100 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Film Spike
			limit = { check_variable = { Tech_i = 6 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Motion Detector
			limit = { check_variable = { Tech_i = 7 } }
			set_temp_variable = { N = 150 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Pictogram Counter
			limit = { check_variable = { Tech_i = 8 } }
			set_temp_variable = { N = 100 } # Funding Cost
			set_temp_variable = { M = 50  } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
		else_if = { # Hollow Coins
			limit = { check_variable = { Tech_i = 9 } }
			set_temp_variable = { N = 50 } # Funding Cost
			set_temp_variable = { M = 50 } # Expertise Cost
			custom_trigger_tooltip = { tooltip = TTW_Espionage_FundingCost_tt   divide_temp_variable = { N = 1000 } NOT = { check_variable = { TTW_Espionage_Budget < N } } }
			custom_trigger_tooltip = { tooltip = TTW_Espionage_ExpertiseCost_tt NOT = { check_variable = { TTW_Espionage_Expertise < M } } }
		}
	}
}

#################################################
#                    Regions                    #
#################################################

TTW_Espionage_Viewing_NorthAmerica	 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_NA } }
TTW_Espionage_Viewing_CentralAmerica = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_CA } }
TTW_Espionage_Viewing_SouthAmerica   = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_SA } }
TTW_Espionage_Viewing_Europe		 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_EU } }
TTW_Espionage_Viewing_Russia		 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_RU } }
TTW_Espionage_Viewing_Africa		 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_AF } }
TTW_Espionage_Viewing_MiddleEast	 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_ME } }
TTW_Espionage_Viewing_EastAsia		 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_EA } }
TTW_Espionage_Viewing_SouthEastAsia  = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_SEA } }
TTW_Espionage_Viewing_Oceania		 = { TTW_BoP_Viewing_Espionage = yes check_variable = { Espionage_SelectedRegion = token:Espionage_Map_OC } }

#################################################
#                   Technology                  #
#################################################

TTW_Espionage_FmElo_Researched  = { set_temp_variable = { Tech_i = 0 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Sonder_Researched = { set_temp_variable = { Tech_i = 1 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Ent_Researched    = { set_temp_variable = { Tech_i = 2 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Bugs_Researched   = { set_temp_variable = { Tech_i = 3 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Cipher_Researched = { set_temp_variable = { Tech_i = 4 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Nah_Researched    = { set_temp_variable = { Tech_i = 5 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Radio_Researched  = { set_temp_variable = { Tech_i = 6 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Camera_Researched = { set_temp_variable = { Tech_i = 7 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Fleck_Researched  = { set_temp_variable = { Tech_i = 8 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }
TTW_Espionage_Truth_Researched  = { set_temp_variable = { Tech_i = 9 } custom_trigger_tooltip = { tooltip = TTW_Espionage_Tech_Researched_tt check_variable = { TTW_Espionage_TechArray^Tech_i = 1 } } }