scripted_gui = {

	Develop_State ={
		context_type = selected_state_context
		window_name = "develop_state_window_item"
		parent_window_token = selected_state_view	
		
		visible = {
			always = yes
		}
		
		triggers = {
					
			develop_state_button_click_enabled = {
			
				#custom_triggers_tooltip = develop_state_click_enabled_tooltip
				
				ROOT = {
					set_temp_variable = {
						var = income_trigger_temp_var
						value = 5
					}
					has_income_with_inflation_greater_than_or_equals = yes
				}
				
				THIS = {
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = infrastructure
						size < 1
					}
					NOT = {
						has_state_flag = develop_economic_action_state
					}
				}
            }
		}
		
		effects = {
	
			develop_state_button_click = {
			
				#custom_effects_tooltip = develop_state_click_tooltip
				
				THIS = {
					remove_building = {
						type = infrastructure
						level = 2
					}
					
					if = {
						limit = {
							OR = {
								has_state_category = wasteland
								has_state_category = enclave
								has_state_category = tiny_island
							}
						}
						set_state_category = pastoral
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -5
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = pastoral
						}
						set_state_category = rural
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -6.25
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = rural
						}
						set_state_category = village
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -7.75
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = village
						}
						set_state_category = town
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -9.75
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = town
						}
						set_state_category = large_town
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -12.25
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = large_town
						}
						set_state_category = suburb
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -15.25
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = suburb
						}
						set_state_category = large_suburb
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -19
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = large_suburb
						}
						set_state_category = city
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -23.75
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = city
						}
						set_state_category = large_city
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -29.5
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = large_city
						}
						set_state_category = metropolis
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -37
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = metropolis
						}
						set_state_category = conurbation
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -46.5
							}
							add_income_with_inflation = yes
						}
					}
					else_if = {
						limit = {
							has_state_category = conurbation
						}
						set_state_category = megalopolis
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -58
							}
							add_income_with_inflation = yes
						}
					}
					else = {
						add_extra_state_shared_building_slots = 1
						ROOT = {
							set_temp_variable = {
								var = income_var_temp
								value = -10
							}
							add_income_with_inflation = yes
						}
					}
					
					set_state_flag = {
						flag = develop_economic_action_state
						days = 180
					}
					
					#添加一个民工，然后删除，用来刷新建筑槽
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
				
				ROOT = {
					set_country_flag = {
						flag = develop_state_economic_action_flag
						days = 30
					}
				}
			}
		}
		
		ai_enabled = {
            always = no
        }
	}

}